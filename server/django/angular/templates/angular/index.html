{% load staticfiles %}
<!DOCTYPE html>
<html style="height: 100%; margin: 0; padding: 0;">
<head lang="en">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>UniTime</title>

    <!-- Scripts Start -->
    <script src="{% static 'angular/js/lib/jquery-2.1.4.min.js' %}"></script>

    <script src="{% static 'angular/js/lib/angular.js' %}"></script>
    <script src="{% static 'angular/js/lib/angular-route.js' %}"></script>
    <script src="{% static 'angular/js/lib/angular-resource.js' %}"></script>
    <script src="{% static 'angular/js/lib/angular-sanitize.min.js' %}"></script>
    <script src="{% static 'angular/js/lib/angular-cookies.js' %}"></script>

    <script src="{% static 'angular/js/lib/bootstrap.min.js' %}"></script>

    <script src="{% static 'angular/js/lib/underscore-min.js' %}"></script>

    <script src="{% static 'angular/js/app.js' %}"></script>
    <script src="{% static 'angular/js/services.js' %}"></script>
    <script src="{% static 'angular/js/controllers.js' %}"></script>

    <!-- Scripts End -->

    <!-- CSS Start -->
    <link rel="stylesheet" type="text/css" href="{% static 'angular/css/bootstrap.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'angular/css/app.css' %}">
    <!-- CSS End -->

</head>

<body ng-app="unitime" style="" ng-controller="unicontrol">



<nav class="navbar navbar-default">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" data-toggle="modal" data-target="#unitimeInfoModal">UniTime</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">

        <ul class="nav navbar-nav navbar-right">
            <li><a type="button" class="btn btn-warning" data-toggle="modal" data-target="#addCourseModal">Add course</a></li>
            <ul class="list-inline nav navbar-nav" ng-repeat="course in selected_courses">
                <li><a type="button" class="btn btn-primary" ng-click="courseDetail(course)" data-toggle="modal" data-target="#courseModal">[[course.course_code]]</a></li>
            </ul>
        </ul>

    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

  <!-- Cookie Message and first time visit -->
<div ng-if="cookie_accepted === undefined || cookie_accepted === 'f'">

    <div id="cookie_message" class="alert alert-danger alert-dismissible" role="alert" align="center" style="margin-top: -12pt;">
      <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <strong>This service is based on cookies, by using it you accept that we store cookies!</strong>
        <a href="https://www.pts.se/sv/Bransch/Regler/Lagar/Lag-om-elektronisk-kommunikation/Cookies-kakor/Fragor-och-svar-om-kakor-for-webbplatsinnehavare/">More info!</a>
    </div>

    <div align="center" style="margin-top: -12pt;">
        <div class="jumbotron">
            <h1>Welcome to UniTime!</h1>
            <p>This is a service that lets you check your schedule fast and easy.</p>
            <p>The group behind this service are students at LNU.</p>
            <p><button type="button" class="btn btn-lg btn-primary" data-toggle="modal" data-target="#addCourseModal">Add course</button></p>
        </div>

    </div>

</div>

<!-- Ajax loader -->
<div id="ajaxloader" align="center" style="margin-top: 60pt" hidden>
    <img  src="{% static 'angular/gif/ajax-loader.gif' %}">
</div>

            <!-- Events -->
            <div class="container">

                <ul class="list-group">
                    <div ng-repeat="event in events | orderBy: 'startdate'">

                        <div ng-if="$index % 2 == 0">
                            <li class="list-group-item list-group-item-warning" style="color: black;">
                                <div ng-if="event.teacher == 'Tobias Andersson-Gidlund'" align="center">
                                    <img style="width: 25pt; height: 25pt;" src="http://orig07.deviantart.net/49e8/f/2010/331/1/2/darth_vader_icon_256x256_by_geo_almighty-d33pmyi.png">
                                </div>
                                <div align="center"><h3>[[ event.name_en ]]</h3></div>

                                <div align="center"><h3>[[ event.startdate ]] / [[event.starttime]]-[[event.endtime]]</h3></div>
                                <div style="width: 100%;" ng-if="event.room.length < 2">Room: Not available</div>
                                <div style="width: 100%;" ng-if="event.room.length >= 2">Room: [[ event.room ]]</div>

                                <div style="width: 100%;" ng-if="event.teacher.length < 2">Teacher: Not available</div>
                                <div style="width: 100%;" ng-if="event.teacher.length >= 2">Teacher: [[ event.teacher ]]</div>


                                <div style="width: 100%;" ng-if="event.info.length < 2">Info: Not available</div>
                                <div style="width: 100%;" ng-if="event.info.length >= 2">Info: [[ event.info ]]</div>

                                <div style="width: 100%;" ng-if="event.desc.length < 2">Description: Not available</div>

                                <div class="row" style="width: 100%; margin: 0px" ng-if="event.desc.length >= 2">Description: [[ event.desc ]]</div>
                            </li>
                        </div>
                        <div ng-if="$index % 2 != 0">
                            <li class="list-group-item" style="max-width: 100%; color: black;">
                                <div ng-if="event.teacher == 'Tobias Andersson-Gidlund'" align="center">
                                    <img style="width: 25pt; height: 25pt;" src="http://orig07.deviantart.net/49e8/f/2010/331/1/2/darth_vader_icon_256x256_by_geo_almighty-d33pmyi.png">
                                </div>
                                <div align="center"><h3>[[ event.name_en ]]</h3></div>

                                <div align="center"><h3>[[ event.startdate ]] / [[event.starttime]]-[[event.endtime]]</h3></div>
                                <div style="width: 100%;" ng-if="event.room.length < 2">Room: Not available</div>
                                <div style="width: 100%;" ng-if="event.room.length >= 2">Room: [[ event.room ]]</div>

                                <div style="width: 100%;" ng-if="event.teacher.length < 2">Teacher: Not available</div>
                                <div style="width: 100%;" ng-if="event.teacher.length >= 2">Teacher: [[ event.teacher ]]</div>


                       Platsens historia - milj√∂ och minne         <div style="width: 100%;" ng-if="event.info.length < 2">Info: Not available</div>
                                <div style="width: 100%;" ng-if="event.info.length >= 2">Info: [[ event.info ]]</div>

                                <div style="width: 100%;" ng-if="event.desc.length < 2">Description: Not available</div>
                                <div style="width: 100%;" ng-if="event.desc.length >= 2">Description: [[ event.desc ]]</div>

                            </li>
                        </div>

                    </div>
                </ul>
            </div>




        <!-- Course info modal -->
        <div class="modal fade" id="courseModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">[[ course_info.course_code ]]</h4>
              </div>
              <div class="modal-body" align="center">
                  <h4>[[ course_info.name_en ]]</h4>
                  <h4>[[ course_info.name_sv ]]</h4>
                  <h4>[[ course_info.course_points ]]</h4>
                  <h4>[[ course_info.course_speed ]]</h4>
                  <h4><a href="[[ course_info.syllabus_en ]]">Syllabus SV</a></h4>
                  <h4><a href="[[ course_info.syllabus_sv ]]">Syllabus EN</a></h4>
                  <h4><a href="[[ course_info.url ]]">Course page</a></h4>

              </div>

                      <div class="modal-footer">
                          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                          <button ng-click="removeCourse(course_info)" type="button" class="btn btn-danger">Delete</button>
                      </div>

            </div>
          </div>
        </div> <!-- Add course modal end -->



        <!-- Add course Modal -->
        <div class="modal fade" id="addCourseModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Add course</h4>
              </div>
              <div class="modal-body">

                  <!-- Message -->
                    <div id="alert_message" class="alert alert-success alert-dismissible" role="alert" align="center">
                      <button type="button" class="close" aria-label="Close" onclick="closeAlertMessage()"><span aria-hidden="true">&times;</span></button>
                      <strong>[[message]]</strong>


                    </div>

                        <!-- Filter Courses Input -->
                        <form class="form-inline">
                            <input type="text" class="form-control" ng-model="filterCourses" placeholder="Filter course" autofocus style="width: 100%">
                        </form><!-- Filter Courses Input End -->

                  <div class="modal-body-content">
                                <div ng-repeat="course in courses | filter : filterCourses">
                                    <div class="well well-sm" align="center" style="margin-bottom: -1pt">
                                        <h4>
                                        [[course.course_code]]
                                        </h4>
                                        <p>[[course.name_en]]</p>
                                        <p>[[course.name_sv]]</p>
                                            <button type="button" class="btn btn-primary" ng-click="getCourse(course.course_code)">
                                                Add
                                            </button>
                                    </div>
                                </div>
                      </div>

              </div>
            </div>
          </div>
        </div> <!-- Add course modal end -->


        <!-- UniTime info modal -->
        <div class="modal fade" id="unitimeInfoModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">About UniTime</h4>
              </div>
              <div class="modal-body">

                  UniTime is a service made by Kodkollektivet!
                  Kodkollektivet is a group of students from LNU.
                  If you wanna join us or have interest in our projects.
                  Please visit us at: <a href="http://www.kodkollektivet.se">Kodkollektivet</a>

              </div>

                      <div class="modal-footer">
                          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                      </div>

            </div>
          </div>
        </div> <!-- Add course modal end -->

<script>
    $('#alert_message').hide();

    var openAlertMessage = function() {
        $('#alert_message').show();
    };

    var closeAlertMessage = function() {

        window.setTimeout(function() {
            $("#alert_message").fadeTo(500, 0).slideUp(500, function(){
                $(this).fadeTo(0,500);
                $(this).hide();
            });
        }, 2000);
    };


    $('#addCourseModal').on('show.bs.modal', function () {
        $('.modal-body-content')
                .css('height',$( window ).height()*0.70)
                .css('overflow', 'scroll')
                .css('overflow-x', 'hidden');
    });

</script>

</body>
</html>




